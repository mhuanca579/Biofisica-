<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>NeuroNav-NanoTwin ‚Ä¢ Nanorrobots magneto-guiados</title>
<style>
  :root{
    --bg:#0b1020;
    --panel:#111827;
    --card:rgba(255,255,255,.06);
    --b:rgba(255,255,255,.12);
    --txt:#e9ecff;
    --mut:rgba(233,236,255,.78);
    --acc:#38bdf8;
    --acc2:#a78bfa;
    --r:16px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Arial,system-ui;background:var(--bg);color:var(--txt)}
  header{
    padding:22px 14px;
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    border-bottom:1px solid rgba(255,255,255,.10);
    text-align:center;
  }
  h1{margin:0;font-size:22px;line-height:1.25}
  .sub{margin:8px 0 0;color:var(--mut);font-size:13px;line-height:1.4}
  .wrap{padding:18px 12px 26px;max-width:1200px;margin:0 auto}
  .tagrow{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
  .tag{
    font-size:12px;color:var(--mut);
    padding:7px 10px;border-radius:999px;
    border:1px solid rgba(255,255,255,.14);
    background:rgba(255,255,255,.06);
  }
  .sim-box{
    width:100%;
    margin:16px auto;
    border:2px solid rgba(56,189,248,.35);
    border-radius:18px;
    overflow:hidden;
    background:#000;
    box-shadow:0 10px 40px rgba(0,0,0,.35);
  }
  iframe{width:100%;height:620px;border:0;display:block}
  .grid2{display:grid;grid-template-columns:1.2fr .8fr;gap:14px;align-items:start}
  .card{
    background:var(--card);
    border:1px solid var(--b);
    border-radius:18px;
    padding:14px;
  }
  h2{margin:0 0 10px;font-size:16px}
  p{margin:8px 0;color:var(--mut);font-size:13px;line-height:1.45}
  .kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
  .kpi{
    background:rgba(0,0,0,.22);
    border:1px solid rgba(255,255,255,.10);
    border-radius:14px;
    padding:10px;
    min-height:64px;
  }
  .kpi div{font-size:12px;color:var(--mut)}
  .kpi b{font-size:16px}
  #diag{
    font-weight:900;margin:12px 0 6px;
    padding:10px 12px;border-radius:14px;
    border:1px solid rgba(255,255,255,.14);
    background:rgba(0,0,0,.22);
  }
  ul{margin:8px 0 0;padding-left:18px;color:var(--mut);font-size:13px}
  .mini{font-size:12px;color:rgba(233,236,255,.65)}
  footer{
    padding:12px;background:rgba(255,255,255,.04);
    border-top:1px solid rgba(255,255,255,.10);
    text-align:center;font-size:13px;color:rgba(233,236,255,.72)
  }
  @media(max-width:980px){
    .grid2{grid-template-columns:1fr}
    iframe{height:660px}
    .kpis{grid-template-columns:1fr 1fr}
  }
</style>
</head>
<body>

<header>
  <h1>Optimizaci√≥n de la liberaci√≥n dirigida de f√°rmacos en tumores cerebrales mediante nanorrobots magneto-guiados y un gemelo digital con IA</h1>
  <div class="sub">NeuroNav-NanoTwin ‚Ä¢ Navegaci√≥n + Liberaci√≥n controlada ‚Ä¢ Modelo educativo (2D simplificado)</div>
  <div class="tagrow">
    <span class="tag">BBB (barrera hematoencef√°lica)</span>
    <span class="tag">Gu√≠a magn√©tica</span>
    <span class="tag">Difusi√≥n + Convecci√≥n</span>
    <span class="tag">AUC tumor vs tejido sano</span>
  </div>
</header>

<div class="wrap">
  <div class="sim-box">
    <!-- cache-buster para que GitHub Pages no muestre versi√≥n vieja -->
    <iframe src="./juegos/nanorobots.html?v=2026"></iframe>
  </div>

  <div class="grid2">
    <div class="card">
      <h2>C√≥mo leer la simulaci√≥n (simple)</h2>
      <p><b>1)</b> Presiona <b>üíâ Inyectar</b>. Los nanorrobots aparecen en el vaso sangu√≠neo.</p>
      <p><b>2)</b> Ajusta el <b>campo magn√©tico</b> y la <b>permeabilidad de la BBB</b> para que m√°s nanorrobots crucen hacia el tumor.</p>
      <p><b>3)</b> Ajusta <b>pulsos</b> y <b>tasa de liberaci√≥n</b> para subir <b>AUC en tumor</b> y bajar <b>exposici√≥n en tejido sano</b>.</p>
      <p class="mini">Nota: es un modelo 2D educativo. No representa valores cl√≠nicos reales, solo relaciones biof√≠sicas.</p>
    </div>

    <div class="card">
      <h2>Conclusiones autom√°ticas</h2>

      <div class="kpis">
        <div class="kpi"><div>Llega al tumor</div><b id="kReach">--</b></div>
        <div class="kpi"><div>AUC tumor (sim.)</div><b id="kTumDose">--</b></div>
        <div class="kpi"><div>Exposici√≥n sana</div><b id="kTox">--</b></div>
        <div class="kpi"><div>Control tumoral</div><b id="kCtrl">--</b></div>
      </div>

      <div id="diag">Esperando datos‚Ä¶</div>
      <ul id="points"></ul>
      <p id="tip" style="margin-top:10px;font-weight:800"></p>
    </div>
  </div>
</div>

<footer>Proyecto de Biof√≠sica ‚Ä¢ NeuroNav-NanoTwin ‚Ä¢ 2026</footer>

<script>
const el = (id)=>document.getElementById(id);

function setPoints(arr){
  el("points").innerHTML = arr.map(x=>"<li>"+x+"</li>").join("");
}

window.addEventListener("message",(e)=>{
  if(!e.data || e.data.type !== "NANO_METRICS") return;
  const m = e.data.payload || {};

  // Compatibles con lo que ya ten√≠as:
  const reach = Number(m.reachPct ?? 0);
  const aucTum = Number(m.doseTumor ?? 0);
  const tox = Number(m.toxicity ?? 0);
  const ctrl = Number(m.tumorPct ?? 0); // aqu√≠ lo usamos como "Control tumoral (%)"

  el("kReach").textContent = Math.round(reach) + "%";
  el("kTumDose").textContent = aucTum.toFixed(1);
  el("kTox").textContent = Math.round(tox) + "%";
  el("kCtrl").textContent = Math.round(ctrl) + "%";

  let diag = "üü® Configuraci√≥n mejorable";
  if(ctrl >= 75 && tox <= 30) diag = "‚úÖ Excelente: alta eficacia con baja exposici√≥n sana";
  else if(ctrl >= 60 && tox <= 45) diag = "üü¶ Buena: balance razonable";
  else if(tox >= 70) diag = "‚ö†Ô∏è Riesgo alto: demasiada exposici√≥n fuera del tumor";

  el("diag").textContent = diag;

  const pts = [];
  if(reach < 40) pts.push("Pocos nanorrobots alcanzan el tumor: sube campo magn√©tico o permeabilidad BBB.");
  else pts.push("Buen transporte hacia el tumor (navegaci√≥n efectiva).");

  if(aucTum < 35) pts.push("AUC tumoral baja: sube pulsos/liberaci√≥n local o adhesi√≥n.");
  else pts.push("AUC tumoral adecuada: liberaci√≥n localizada efectiva.");

  if(tox > 50) pts.push("Exposici√≥n en tejido sano alta: baja tasa fuera-objetivo o aumenta liberaci√≥n solo en tumor.");
  else pts.push("Exposici√≥n sana controlada.");

  setPoints(pts);

  el("tip").textContent =
    "Tip r√°pido: aumenta gu√≠a magn√©tica + BBB controlada y usa pulsos cortos para liberar solo dentro del tumor.";
});
</script>

</body>
</html>
